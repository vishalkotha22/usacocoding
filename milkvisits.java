import java.io.*;
import java.util.*;

public class milkvisits {
	public static void main(String[] args) throws Exception{
		//10111110110011111111111101111111001111111111011111111111110111111100111111110111111111111101010011111111111110111111111111111111110110111111111111111011111111111111111111111111011110110111111111111111011111011111101111111111110111111101111011111111111111111001101011111101111111111110111111101111110111111111111111111011001110011111011111111101111111110111111111111111111101111011110111110101111011111110011110111111111110111111111110111111011111111111011111111110111111011111111111111110111111111011111111110111111111111111110011011100111111111111111111111111101110011111111111011111101111111111111111010111111111111011011111111110010111111111111111111111011000111011010111011001110101011001111111101110111111111101111111110111111111111111111111011111111111111111111111111111111011111101111111111111111111111111111111111111111111111111111111111100111111101111111111111101011010101111110111111111111111111110101111111101100111111101111111011111111111111111111111110101011111111101111111111111111111111111111011111011111111111111111111111111110111110110111110111111111111111101001100111111101111111011110101111111011111111101111110101111111110111111111011011111111111111111110111111111111010101111111111011111110101111111111111111111110111011111101111111111111011011111011010011101111011111111111101001111011111111110011111111111001111111111011111111111110100111101111101111111111111111110111111111100111111111111111011101111111110111111110101111001111111111111001111111111110101111110110111111111111110111001111111111011101111110111011111111111111011110111111111110111110111111110111011111111111111111111111111101111101111011011111101111111111111101111111111101111111111111111111111110011101101111111111110111111110111111111110111101101111111011111111111101111110110111111101111111111101111111111110111011111111111011111111011111111101111011101111111100011111111111111111111111111111111111111111111111111110111111111111101111111111011111111111011101111111111110111111111111111011111111011111011111011
		//desired: 10101110110011111111111101111011011111111011111011111111110011111100111111110111111111111101110011111111111111111111111111111110110111111111111111011011011011111111111111111111011110110111111111111111011111011000101111111111110111111001111111110111111111111001101011111101111111111110111111111111110111111111111111111111001110011111111110110111111111100111111111111111111101111011110111010111111011111110111110111111111110111111111110111111011111110111011111111110111111001111111111111111110111111111111111110111111111111111110011011100111111111111101111111111111110111111110111011111101101110111111111010111111111111011111111111110011110111111111111111111011000111111011111111001110101011001111111101110111111111101111111110111011111111111111111011111111111111111111111111111111011111101111111111111111111111111111101111111111111111111111111111100111111101111111111111111011010111111111111111111111111111111100111101101100111111101111111011111111111111111111111111101011111111101111111111111111111111111111111111011111111111111110111111111110111111110111110111111101111111101001100111111101111111011110101111111011011111101111110100111111110111111111011111111111111111011110111111111011011011111111111011111111101111111111111111111110111011111101111111111111011111111011011011101111011111111111101001111011101111110011111111111001111101111011111111111110100111101111101111111111111111110011011111000111111111111110011001110111110111101110101111101111111011111011111111111110101111110110111011111111110111101111111111111101111110111011111111011111011110111111111111111111111110110111011111111111111111111111111101111101111111011111101111111111101101111111110111111111111111111111111100011101101011111111010111111110111111111111111100101111111111110111111101111110110111111101111111111101111111110111111011111111111011111111011111111101111110101111111100011111011111111111111111111111111111111110111111111110011110111111101111111111011111110111011101111111111110011111111111111011110111011111011111011
		BufferedReader br = new BufferedReader(new FileReader("milkvisits.in"));
		PrintWriter out = new PrintWriter(new FileWriter("milkvisits.out"));
		StringTokenizer st = new StringTokenizer(br.readLine());
		int n = Integer.parseInt(st.nextToken());
		int m = Integer.parseInt(st.nextToken());
		String type = br.readLine();
		TreeNode[] tree = new TreeNode[n+1];
		for(int a = 1; a <= n; a++)
			tree[a] = new TreeNode(type.charAt(a-1));
		for(int i = 0; i < n-1; i++){
			st = new StringTokenizer(br.readLine());
			int one = Integer.parseInt(st.nextToken());
			int two = Integer.parseInt(st.nextToken());
			tree[one].addChildren(two);
			tree[two].setParent(one);
		}
		for(int j = 0; j < m; j++){
			st = new StringTokenizer(br.readLine());
			int start = Integer.parseInt(st.nextToken());
			int end = Integer.parseInt(st.nextToken());
			char wanted = st.nextToken().charAt(0);
			ArrayList<Integer> startPath = new ArrayList<Integer>();
			ArrayList<Character> typesFoundE = new ArrayList<Character>();
			while(tree[start].getParent() > 0){
				startPath.add(start);
				start = tree[start].getParent();
			}
			startPath.add(start);
			while(!startPath.contains(end)){
				typesFoundE.add(tree[end].getData());
				end = tree[end].getParent();
			}
			boolean pass = false;
			for(int i = 0; i <= startPath.indexOf(end); i++)
				if(type.charAt(startPath.get(i)-1) == wanted){
					pass = true;
					break;
				}
			if(!pass)
				pass = typesFoundE.contains(wanted);
			if(pass)
				out.print(1);
			else
				out.print(0);
		}
		out.close();
	}
}
class TreeNode{
	ArrayList<Integer> children;
	char data;
	int parent;
	public TreeNode(char d){
		data = d;
		children = new ArrayList<Integer>();
		parent = -1;
	}
	public void setData(char c){
		data = c;
	}
	public char getData(){
		return data;
	}
	public int getParent(){
		return parent;
	}
	public void addChildren(int n){
		children.add(n);
	}
	public void removeChildren(TreeNode n){
		children.remove(children.indexOf(n));
	}
	public void setParent(int parent){
		this.parent = parent;
	}
	public String toString(){
		return data + " " + parent + " " + children;
	}
}
